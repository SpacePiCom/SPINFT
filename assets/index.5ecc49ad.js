import{a as P,C as W,q as v,ai as $,aj as H,y as U,E as e,a8 as h,J as I,Z as z,bo as K,G as x,bp as A,bq as Q,aa as Y,H as m,F as M,br as X,a7 as O}from"./index.8984459f.js";/* empty css               */import{b as V,c as j}from"./contractHelpers.973a379a.js";import{E as R}from"./index.48ddf3e1.js";/* empty css               */import{s as ee,u as te}from"./index.065a5318.js";var ae=P({props:{status:{type:Boolean,default:!1},data:{type:Array,default:[]},quantity:{type:Number,default:0},locale:{type:Object,default:{}},nftinfo:{type:Object,default:{}},type:{type:String,default:!1}},emits:["close"],setup(n,{emit:s}){const{state:r}=W(),a=v(0),u=v([]),y=v([]),g=v([]),p=n.locale.network,c=window.ethereum?$(window.ethereum):H(r.web3config.rpcUrls),o=v(!1);for(let l=0;l<n.quantity;l++)console.log("HELLO"),n.type=="del"?u.value.push(!0):u.value.push(!1);const f=l=>{u.value[l]?(u.value[l]=!1,a.value=a.value-1):(u.value[l]=!0,a.value=a.value+1)},b=()=>{if(a.value!==n.quantity)for(let l=0;l<n.quantity;l++)u.value[l]=!0,a.value=n.quantity;else for(let l=0;l<n.quantity;l++)u.value[l]=!1,a.value=0},k=async l=>{o.value=!0,V(p,l.address,c,1).connect(c).setApprovalForAll(l.contract,!0).then(i=>{i.wait().then(()=>{A({message:n.locale.message.allowance_success,type:"success"}),s("close",!1),o.value=!1})}).catch(()=>{A({message:n.locale.message.allowance_error,type:"error"}),s("close",!1),o.value=!1})},t=async(l,d)=>{console.log("claim",l,d),g.value=[];for(let i=0;i<n.quantity;i++)u.value[i]&&g.value.push(n.data[i]);if(g.value.length!=0){o.value=!0;const i=j(p,l.contract,c,1);d=="del"?i.connect(c).withdrawWithId(l.address,g.value).then(N=>{N.wait().then(()=>{A({message:n.locale.message.withdraw_success,type:"success"})}),s("close",!1),o.value=!1}).catch(()=>{A({message:n.locale.message.withdraw_error,type:"error"}),s("close",!1),o.value=!1}):i.connect(c).deposit(l.address,g.value).then(N=>{N.wait().then(()=>{A({message:n.locale.message.deposit_success,type:"success"}),s("close",!1),o.value=!1})}).catch(()=>{A({message:n.locale.message.deposit_error,type:"error"}),s("close",!1),o.value=!1})}};return U(()=>n.status,l=>{if(!l)for(let d=0;d<n.quantity;d++)u.value[d]=!1,a.value=0},{immediate:!0}),{checked:a,statuss:u,pledgeData:y,updateChecked:f,all:b,deposit:t,allowance:k,loginStatus:o}},render(){const{checked:n,quantity:s,data:r,nftinfo:a,statuss:u,pledgeData:y,updateChecked:g,all:p,status:c,locale:o,type:f,allowance:b,deposit:k,loginStatus:t}=this;return e(x,null,[e(R,{modelValue:c,title:a.title,closeOnClickModal:!1,onClose:()=>{this.$emit("close")}},{default:()=>[e("div",{class:"quantity"},[e("span",{class:"quantity-title"},[o.quantity,h("\xA0"),e("span",{style:"color: #23262F;"},[h("("),e("span",{style:"color: rgba(97, 0, 236, 1);"},[n]),h("/"),s,h(")")])]),e("button",{onClick:()=>{p()}},[o.all])]),e("div",{class:"quantity-container"},[r==null?void 0:r.map((l,d)=>e("div",{class:"quantity-card",onClick:()=>{g(d)}},[e("div",{class:"quantity-bg",style:{background:u[d]?"":"none"}},[e(I,{src:a.path+l+a.et},null),e("div",{class:"icon",style:{display:u[d]?"":"none"}},[e(z,null,{default:()=>[e(K,null,null)]})])]),e("span",{class:"card-title"},["#"+l])]))]),a!=null&&a.Approved?e(x,null,[r.length>0?e("button",{class:"receive",onClick:()=>t?"":k(a,f)},[o.ok,t?e("div",{class:"loaders"},null):""]):e("button",{class:"receive receive-disabled",disabled:!0,onClick:()=>t?"":k(a,f)},[o.ok,t?e("div",{class:"loaders"},null):""])]):e("button",{class:"receive",onClick:()=>t?"":b(a)},[o.approved,t?e("div",{class:"loaders"},null):""])]})])}}),le=P({props:{status:{type:Boolean,default:!1},login:{type:Boolean,default:!1},data:{type:Object,default:{}},locale:{type:Object,default:{}}},emits:["close"],render(){const{status:n,login:s,locale:r}=this;return e("div",{class:"my-dialog"},[e(R,{modelValue:n,closeOnClickModal:!1,onClose:()=>{this.$emit("close")}},{default:()=>[e("div",{class:"login"},[s?e("div",{class:"loginAnimation"},null):e("span",null,[h("Yay! \u{1F389}")])]),e("div",{class:"text"},[s?e("span",{class:"waiting"},[r.waiting]):e("span",{class:"waiting"},[r.successPurchased]),e("span",{class:"quantity"},[r.quantity,h(" (0)")])]),e("div",{class:"tables"},[e("table",null,[e("tr",{class:"table-header"},[e("th",{class:"table-header-item"},[e("span",null,[r.name])]),e("th",{class:"table-header-item"},[e("span",null,[r.transactionId])])]),s?e("tr",{class:"table-body"},[e("td",{class:"table-body-item",style:"color: #9757D7;width: 50%;"},[e("span",null,[h("-")])]),e("td",{class:"table-body-item",style:"width: 50%;"},[e("span",null,[h("-")])])]):e(x,null,[e("tr",{class:"table-body"},[e("td",{class:"table-body-item",style:"color: #9757D7"},[e("a",{style:"color: #6200EB;",href:"https://bscscan.com/tx/1"},[e("span",null,[h("Cyberpunk Pi #1")])])]),e("td",{class:"table-body-item"},[e("span",null,[Q("0x3A2d206A01DFE9f27D5CC915AbC8bA7504B1ec02",7)])])])])])]),s?e(Y,{style:"background: #777E90;"},{default:()=>[r.receive]}):e(Y,{onClick:()=>this.$emit("close")},{default:()=>[r.receive]})]})])}}),se="/assets/lock.995f59df.svg",G=P({props:{endTime:{type:Number,default:0},locale:{type:Object,default:{}},data:{type:Object,default:{}}},emits:["status","uplocale"],setup(n,{emit:s}){const{state:r,commit:a}=W(),u=v(0),y=v(0),g=v(0),p=v(0),c=v(0),o=v(),f=v(!1),b=v(),k=v(0),t=v(!1),l=v(!1),d=v(!1),i=v(""),N=n.locale.network,D=window.ethereum?$(window.ethereum):H(r.web3config.rpcUrls),C=()=>{const w=new Date().getTime(),S=new Date(n.endTime*1e3).getTime()-w;c.value=S,S>0?(u.value=Math.floor(S/1e3/60/60/24),y.value=Math.floor(S/1e3/60/60%24),g.value=Math.floor(S/1e3/60%60),p.value=Math.floor(S/1e3%60)):(u.value=0,y.value=0,g.value=0,p.value=0,clearInterval(o.value))};o.value=setInterval(C,1e3),U(()=>n.endTime,()=>{o.value=setInterval(C,1e3)});const T=w=>{f.value=w,s("status",w)};return{state:r,commit:a,day:u,hour:y,minute:g,second:p,timer:c,pledgeStatus:f,updatePledgeStatus:T,dialogStatus:t,loginStatus:l,updateDialogStatus:w=>{w?(t.value=!0,l.value=!0,setTimeout(()=>{l.value=!1},2e3)):(t.value=!1,l.value=!1)},updatepledgeData:w=>{w=="del"?(i.value="del",b.value=n.data.OwnerStakeData[0],k.value=n.data.OwnerStakeData[0].length):(i.value="add",b.value=n.data.OwnerNftData,console.log("pledgeData",n.data.OwnerNftData.length),k.value=n.data.OwnerNftData.length),T(!0)},pledgeData:b,pledgequantity:k,type:i,claim:async w=>{d.value=!0,j(N,w.contract,D,1).connect(D).claim(w.address).then(S=>{S.wait().then(()=>{A({message:n.locale.message.claim_success,type:"success"}),d.value=!1})}).catch(()=>{d.value=!1,A({message:n.locale.message.claim_error,type:"error"})})},logoStatus:d}},render(){var C,T,_,E,B,w,F,S;const{state:n,commit:s,day:r,hour:a,minute:u,second:y,pledgeStatus:g,updatePledgeStatus:p,dialogStatus:c,loginStatus:o,updateDialogStatus:f,updatepledgeData:b,pledgeData:k,locale:t,data:l,pledgequantity:d,type:i,claim:N,logoStatus:D}=this;return e(x,null,[e(ae,{data:k,quantity:d,status:g,onClose:()=>p(!1),locale:t,nftinfo:l,type:i},null),e(le,{status:c,login:o,onClose:()=>{f(!1)},locale:t},null),e("div",null,[e("div",{class:"airdrop-card"},[e("div",{class:"left"},[e("div",{class:"end-style-main",style:{display:l.OwnerStakeData[1]*1e3>new Date().getTime()?"none":""}},[e("div",{class:"end-style1"},[e("span",{class:"end-title"},[t.finished])]),e("div",{class:"end-style2"},null),e("div",{class:"end-style3"},null)]),e("div",{style:"position: relative;"},[e(I,{src:l.logo_url},null),((T=(C=l.OwnerStakeData)==null?void 0:C[0])==null?void 0:T.length)!=0?e(I,{src:se,class:"lock"},null):""]),e("span",{class:"card-titles"},[l.title]),e("span",{class:"card-texts"},[t.auctionEndingIn]),e("div",{class:"card-countdown-main countdown"},[e("div",{class:"card-countdown countdown-container days"},[e("span",{class:"card-title countdown-value"},[r]),e("span",{class:"card-text countdown-heading"},[(_=t==null?void 0:t.date)==null?void 0:_.day])]),e("div",{class:"card-countdown countdown-container hours"},[e("span",{class:"card-title countdown-value"},[a]),e("span",{class:"card-text countdown-heading"},[(E=t==null?void 0:t.date)==null?void 0:E.hour])]),e("div",{class:"card-countdown countdown-container minutes"},[e("span",{class:"card-title countdown-value"},[u]),e("span",{class:"card-text countdown-heading"},[(B=t==null?void 0:t.date)==null?void 0:B.minute])]),e("div",{class:"card-countdown countdown-container seconds"},[e("span",{class:"card-title countdown-value"},[y]),e("span",{class:"card-text countdown-heading"},[(w=t==null?void 0:t.date)==null?void 0:w.second])])])]),e("div",{class:"right"},[e("span",{class:"card-title"},[t.pledge]),e("div",{class:"car-container"},[e("div",null,[e("span",{class:"container-title"},[t.quantity]),e("span",{class:"container-text"},[(F=l.OwnerStakeData)==null?void 0:F[0].length])]),e("div",null,[e("span",{class:"container-title"},[t.Weights]),e("span",{class:"container-text"},[h("1 : "),l.NFT_collections])]),this.data.OwnerStakeData.length>0?e("div",null,[e("span",{class:"container-title"},[t.output]),e("span",{class:"container-text"},[e(I,{src:l.outputImage},null),h("Astronaut V2")])]):""]),e("div",{class:"car-bnt"},[n.walletAddress?e("div",{class:"pledge"},[l.OwnerStakeData[1]*1e3>new Date().getTime()||((S=l.OwnerStakeData)==null?void 0:S[0].length)<=0?e(x,null,[e("button",{class:"del ",disabled:!0},[e("span",null,null)]),l.OwnerStakeData[2]===0||l.OwnerStakeData[1]*1e3>new Date().getTime()?e("button",{class:"add bnt",onClick:()=>b("add")},[e("span",{class:"s"},null),e("span",{class:"ss"},null)]):e("button",{class:"add",disabled:!0},[e("span",{class:"s"},null),e("span",{class:"ss"},null)])]):e(x,null,[e("button",{class:"del bnt",onClick:()=>b("del")},[e("span",null,null)]),e("button",{class:"add",disabled:!0},[e("span",{class:"s"},null),e("span",{class:"ss"},null)])])]):e("button",{class:"bnt",onClick:()=>{s("connectWallet")}},[t.connectWallet]),n.walletAddress==""||l.OwnerStakeData[1]*1e3>new Date().getTime()||Number(l.OwnerStakeData[2])<=0?e("button",{disabled:!0},[t.receive,h(" ("),l.OwnerStakeData[2],h(")")]):e("button",{style:{border:" 2px solid #E62AF0",color:"#E62AF0",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px"},onClick:()=>{D||N(l)}},[t.receive,h(" ("),l.OwnerStakeData[2],h(")"),D?e("svg",{viewBox:"25 25 50 50",class:"loaders"},[e("circle",{r:"20",cy:"50",cx:"50"},null)]):""])])])]),e("div",{class:"content"},[e(I,{src:ee,class:"connect-wallet-introduction-icon"},null),e("span",null,[l.text])])])])}}),J=P({render(){return e(M,{animated:!0},{template:e(x,null,[e("div",{class:"airdrop-card"},[e("div",{class:"left"},[e("div",{style:"position: relative;"},[e(m,{class:"el-image"},null)]),e(m,{variant:"text",style:{width:"100%",height:"26px",marginTop:"16px"}},null),e(m,{variant:"text",style:{width:"80%",height:"16px",marginTop:"16px"}},null),e("div",{class:"card-countdown-main countdown",style:{marginTop:"16px"}},[e("div",{class:"card-countdown countdown-container days"},[e(m,{variant:"text",style:{width:"60px",height:"100%"}},null)]),e("div",{class:"card-countdown countdown-container hours"},[e(m,{variant:"text",style:{width:"60px",height:"100%"}},null)]),e("div",{class:"card-countdown countdown-container minutes"},[e(m,{variant:"text",style:{width:"60px",height:"100%"}},null)])])]),e("div",{class:"right"},[e(m,{variant:"text",style:{width:"100%",height:"36px"}},null),e("div",{class:"car-container"},[e("div",null,[e(m,{variant:"text",style:{width:"100%",height:"16px"}},null)]),e("div",null,[e(m,{variant:"text",style:{width:"100%",height:"16px"}},null)]),e("div",null,[e(m,{variant:"text",style:{width:"100%",height:"16px"}},null)])]),e("div",{class:"car-bnt"},[e(m,{variant:"button",style:{width:"100%",height:"40px"}},null),e(m,{variant:"button",style:{width:"100%",height:"40px"}},null)])])]),e("div",{class:"content"},[e(m,{style:{width:"100%",height:"26px"}},null)])])})}}),re=P({setup(){const{toClipboard:n}=te(),{state:s}=W(),r=t=>{n(t),A.success("copy success")},a=v({}),u=v(!0);v([]);const y=v([]),g=v(!1),p=(t=s.locale,l=s.chainLogoName)=>{X(t,l).then(d=>{if(a.value=d.data,!s.walletAddress)for(let i=0;i<a.value.nftdata.length;i++)j(o,a.value.nftdata[i].contract,f),V(o,a.value.nftdata[i].address,f),a.value.nftdata[i].Balance=0,a.value.nftdata[i].Approved=!1,a.value.nftdata[i].OwnerStakeData=[{},0,0],a.value.nftdata[i].OwnerNftData=[],a.value.nftdata[i].NFT_collections=a.value.nftdata[i].NFT_count;b(),setTimeout(()=>{u.value=!1},1e3)})};p();const c=t=>{g.value=t},o=a.value.network,f=window.ethereum?$(window.ethereum):H(s.web3config.rpcUrls),b=async()=>{for(let t=0;t<a.value.nftdata.length;t++){const l=j(o,a.value.nftdata[t].contract,f),d=V(o,a.value.nftdata[t].address,f);s.walletAddress?Promise.all([d.balanceOf(s.walletAddress),d.isApprovedForAll(s.walletAddress,a.value.nftdata[t].contract),l.getDeposits(s.walletAddress,d.address),l.collections(d.address),l.reversed(),l.total()]).then(([i,N,D,C,T,_])=>{const E=new O(i.toString()).toNumber(),B=new O(C.toString()).toNumber();let w=[],F=[];for(let q=0;q<D[0].length;q++){const L=D[0][q];F.push(new O(L.toString()).toFixed())}const S=new O(D[1].toString()).toNumber(),Z=new O(D[2].toString()).toNumber();w=[F,S,Z],y.value[t]=w,a.value.nftdata[t].Balance=E,a.value.nftdata[t].Approved=N,a.value.nftdata[t].OwnerStakeData=w,a.value.nftdata[t].NFT_collections=B,a.value.NFT_reversed=new O(T.toString()).toNumber(),a.value.NFT_total=new O(_.toString()).toNumber(),a.value.nftdata[t].OwnerNftData=[];for(let q=0;q<E;q++)Promise.all([d.tokenOfOwnerByIndex(s.walletAddress,q)]).then(([L])=>{a.value.nftdata[t].OwnerNftData[q]=new O(L.toString()).toFixed()});setTimeout(()=>{u.value=!1},1e3)}):Promise.all([l.collections(d.address),l.reversed(),l.total()]).then(([i,N,D])=>{const C=new O(0).toNumber(),T=new O(i.toString()).toNumber();let _=[[],0,0];y.value[t]=_,a.value.nftdata[t].Balance=C,a.value.nftdata[t].Approved=!1,a.value.nftdata[t].OwnerStakeData=_,a.value.nftdata[t].NFT_collections=T,a.value.nftdata[t].OwnerNftData=[],a.value.NFT_reversed=new O(N.toString()).toNumber(),a.value.NFT_total=new O(D.toString()).toNumber(),setTimeout(()=>{u.value=!1},1e3)})}};U(()=>s.locale,t=>{t&&(console.log("locale",t),p())}),U(()=>s.walletAddress,()=>{a.value.nftdata=[],p()});let k=setInterval(()=>b(),4e3);return clearInterval(k),U(()=>g.value,t=>{console.log("openStatus.value TYPE",t),t?clearInterval(k):b()},{immediate:!0,deep:!0}),{state:s,copy:r,localeData:a,setOpenStatusChange:c,logoStatus:u,uplocale:p}},render(){var g,p;const{state:n,localeData:s,setOpenStatusChange:r,logoStatus:a}=this,u=new Date().getTime(),y=[1,2];return e("div",{class:"airdrop"},[e("div",{class:"container"},[n.chainLogoName==="eth"&&e("img",{src:"/image/eth_bg.svg",class:"networkBg"},null),n.chainLogoName==="bsc"&&e("img",{src:"/image/bsc_bg.svg",class:"networkBg"},null),e("div",{class:"airdrop-box"},[e(M,{class:"airdrop-title-box",style:{display:a?"":"none"},animated:!0},{template:e(x,null,[e(m,{variant:"text",class:"",style:{height:"100%"}},null)])}),e("div",{class:"airdrop-title-box",style:{display:a?"none":""}},[e("span",{class:"title-box"},[e("span",null,[s==null?void 0:s.progress]),e("span",{class:"title-box-s"},[s==null?void 0:s.progress])])]),e("div",{class:"airdrop-bottom",style:{display:a?"":"none"}},[y.map(()=>e(x,null,[e(J,null,null)]))]),e("div",{class:"airdrop-bottom",style:{display:a?"none":""}},[(g=s==null?void 0:s.nftdata)==null?void 0:g.map(c=>{var o;return e(x,null,[u<Number(((o=c==null?void 0:c.OwnerStakeData)==null?void 0:o[1])*1e3)&&e(G,{endTime:c==null?void 0:c.OwnerStakeData[1],data:c,locale:s,onStatus:f=>r(f)},null)])})]),e(M,{class:"airdrop-title-box",style:{display:a?"":"none"},animated:!0},{template:e(x,null,[e(m,{variant:"text",class:"",style:{height:"100%"}},null)])}),e("div",{class:"airdrop-title-box",style:{display:a?"none":""}},[e("span",{class:"title-box"},[e("span",null,[s==null?void 0:s.finished]),e("span",{class:"title-box-s"},[s==null?void 0:s.finished])])]),e("div",{class:"airdrop-bottom",style:{display:a?"":"none"}},[y.map(()=>e(x,null,[e(J,null,null)]))]),e("div",{class:"airdrop-bottom",style:{display:a?"none":""}},[(p=s==null?void 0:s.nftdata)==null?void 0:p.map(c=>{var o;return e(x,null,[u>Number(((o=c==null?void 0:c.OwnerStakeData)==null?void 0:o[1])*1e3)&&e(G,{endTime:c==null?void 0:c.OwnerStakeData[1],data:c,locale:s,onStatus:f=>r(f),onUplocale:()=>this.uplocale()},null)])})])])])])}});export{re as default};
