import{a as _,q as W,t as d,v as L,x as t,a8 as v,A as Y,Z as z,bo as J,F as x,bq as Z,aa as V,ai as K,aj as $,a7 as p,bp as O,E as G,y as h,bZ as X}from"./index.b90b2718.js";import{B as tt,E as at}from"./icon_eth.7395d19f.js";/* empty css               */import{E as Q,b as P,h as et}from"./contractHelpers.20264e10.js";/* empty css               */var st=_({props:{status:{type:Boolean,default:!1},selectWaitingStatus:{type:Boolean,default:!1},data:{type:Array,default:[]},quantity:{type:Number,default:0},type:{type:String,default:""},locale:{type:Object,default:()=>{}},nftinfo:{type:Object,default:{}}},emits:["close","ok"],setup(a){const s=W(),e=d(0),o=d([]),n=d([]),N=(u,f)=>{o.value[u]?(o.value[u]=!1,e.value=e.value-1,n.value=n.value.filter(l=>l!==f)):(o.value[u]=!0,e.value=e.value+1,n.value=[...n.value,f])},S=()=>{if(e.value!==a.quantity)for(let u=0;u<a.quantity;u++)o.value[u]=!0,e.value=a.quantity,n.value=a.data;else for(let u=0;u<a.quantity;u++)o.value[u]=!1,e.value=0};return L(()=>s.state.walletAddress,u=>{u||(o.value=[],e.value=0,n.value=[])}),{store:s,checked:e,dataStatus:o,updateChecked:N,all:S,upData:n}},render(){const{store:a,checked:s,status:e,data:o,dataStatus:n,updateChecked:N,all:S,quantity:u,type:f,locale:l,selectWaitingStatus:c,upData:C,nftinfo:g}=this;return t(x,null,[t(Q,{modelValue:e,closeOnClickModal:!1,onClose:()=>{this.$emit("close")},title:u>0?f===""?l==null?void 0:l.choose:f==="add"?l==null?void 0:l.add:l==null?void 0:l.dle:l==null?void 0:l.choose},{default:()=>[t("div",{class:"quantity"},[t("span",{class:"quantity-title"},[l==null?void 0:l.quantity,v("\xA0"),t("span",{style:"color: #23262F;"},[v("("),t("span",{style:"color: rgba(97, 0, 236, 1);"},[s]),v("/"),u,v(")")])]),t("button",{onClick:()=>{S()}},[l==null?void 0:l.all])]),t("div",{class:"quantity-container"},[o==null?void 0:o.map((w,k)=>t("div",{class:"quantity-card",onClick:()=>{N(k,w)}},[t("div",{class:"quantity-bg",style:{background:n[k]?"":"none"}},[t(Y,{src:(g==null?void 0:g.path)+w+(g==null?void 0:g.et)},null),t("div",{class:"icon",style:{display:n[k]?"":"none"}},[t(z,null,{default:()=>[t(J,null,null)]})])]),t("span",{class:"card-title"},[v("#"),w])]))]),t("button",{class:"receive",disabled:c==!0,onClick:()=>{c!=!0&&s!=0&&this.$emit("ok",{checked:C,type:f})}},[l==null?void 0:l.ok,c?t("div",{class:"loaders"},null):""])]})])}}),lt=_({props:{status:{type:Boolean,default:!1},login:{type:Boolean,default:!1},data:{type:Object,default:{}},locale:{type:Object,default:{}}},emits:["close"],render(){const{status:a,login:s,locale:e,data:o}=this;return t("div",{class:"my-dialog"},[t(Q,{modelValue:a,closeOnClickModal:!1,onClose:()=>{this.$emit("close")}},{default:()=>[t("div",{class:"login"},[s?t("div",{class:"loginAnimation"},null):t("span",null,[v("Yay! \u{1F389}")])]),t("div",{class:"text"},[s?t("span",{class:"waiting"},[e==null?void 0:e.waiting]):t("span",{class:"waiting"},[e==null?void 0:e.success]),t("span",{class:"quantity"},[e==null?void 0:e.quantity,v(" ("),s?0:o.length,v(")")])]),t("div",{class:"tables"},[t("table",null,[t("tr",{class:"table-header"},[t("th",{class:"table-header-item"},[t("span",null,[e==null?void 0:e.name])]),t("th",{class:"table-header-item"},[t("span",null,[e==null?void 0:e.transactionId])])]),s?t("tr",{class:"table-body"},[t("td",{class:"table-body-item",style:"color: #9757D7;width: 50%;"},[t("span",null,[v("-")])]),t("td",{class:"table-body-item",style:"width: 50%;"},[t("span",null,[v("-")])])]):t(x,null,[o.map(n=>t("tr",{class:"table-body"},[t("td",{class:"table-body-item",style:"color: #9757D7"},[t("a",{style:"color: #6200EB;",href:"https://bscscan.com/tx/"+(n==null?void 0:n.NFT_Hash)},[t("span",null,[n==null?void 0:n.NFT_title])])]),t("td",{class:"table-body-item"},[t("span",null,[Z(n==null?void 0:n.NFT_Hash,7)])])]))])])]),s?t(V,{style:"background: #777E90;"},{default:()=>[e==null?void 0:e.waitingData]}):t(V,{onClick:()=>this.$emit("close")},{default:()=>[e==null?void 0:e.ok]})]})])}}),nt="/assets/arrow.18e70ef3.svg",ct=_({props:{locale:{type:Object,default:()=>{}},data:{type:Object,default:{}}},setup(a){d(a.data.NFT_count);const s=W(),e=d(!1),o=d(!1),n=d(!1),N=d(!1),S=d("");let u=window.ethereum?K(window.ethereum):$(s.state.web3config.rpcUrls);window.ethereum&&s.state.ChainError==!0&&(u=$(s.state.web3config.rpcUrls));const f=d({from:0,to:0}),l=d([]),c=d([]),C=d([]),g=d(0),w=d(!1),k=async()=>{var y,b;const r=P(0,(y=a==null?void 0:a.data)==null?void 0:y.address,u);s.state.walletAddress&&Promise.all([r.balanceOf(s.state.walletAddress),r.isApprovedForAll(s.state.walletAddress,(b=a==null?void 0:a.data)==null?void 0:b.contract)]).then(([i,m])=>{const F=new p(i.toString()).toNumber(),q=m;w.value=q;for(let A=0;A<F;A++)Promise.all([r.tokenOfOwnerByIndex(s.state.walletAddress,A)]).then(([j])=>{l.value[A]=new p(j.toString()).toFixed()})})};k();const B=()=>{e.value=!1},E=r=>{r==="add"?(C.value=l.value,g.value=l.value.length,S.value="add"):(C.value=c.value,g.value=c.value.length,S.value="del"),e.value=!0},U=r=>{c.value=r.checked,o.value=!0,setTimeout(()=>{o.value=!1,e.value=!1},2e3)},H=async r=>{var b,i;P(0,(b=a==null?void 0:a.data)==null?void 0:b.address,1).connect(u).setApprovalForAll((i=a==null?void 0:a.data)==null?void 0:i.contract,!0).then(m=>{m.wait().then(()=>{O({message:a.locale.message.allowance_success,type:"success"}),k()})}).catch(()=>{O({message:a.locale.message.allowance_error,type:"error"})})},T=r=>{n.value=r},D=r=>{N.value=r},I=d([]),R=()=>{var y;I.value=[],T(!0),D(!0),et((y=a==null?void 0:a.data)==null?void 0:y.contract,u,1).connect(u).migrates(c.value).then(b=>{b.wait().then(i=>{var m,F;for(let q=0;q<i.logs.length;q++){const A=i.logs[q],j=A.transactionHash;if(A.address===((m=a==null?void 0:a.data)==null?void 0:m.NFT_Address)){const M=new p(A.topics[3]).toFixed();I.value.push({NFT_id:"#"+M,NFT_title:((F=a==null?void 0:a.data)==null?void 0:F.title2)+"#"+M,NFT_Hash:j})}k(),setTimeout(()=>{D(!1)},2e3)}O({message:a.locale.message.exchange_success,type:"success"})})}).catch(()=>{O({message:a.locale.message.exchange_error,type:"error"}),k(),T(!1),D(!1)})};return L(()=>[c.value,s.state.walletAddress,s.state.network,s.state.locale],()=>{var r;s.state.walletAddress?(k(),f.value={from:c.value.length,to:c.value.length*((r=a==null?void 0:a.data)==null?void 0:r.NFT_count)}):(c.value=[],f.value={from:0,to:0})}),{store:s,Content:r=>{var F;const{quantity:y,bntType:b,locale:i,data:m}=r;return t("div",{class:"convert-nft-card-content-box"},[t("div",{class:"box"},[t("div",{class:"nft-info-box"},[b==="block"?t("img",{src:m.logo_url1},null):t("img",{src:m.logo_url2},null),t("div",{class:"nft-info-container"},[b==="block"?t("span",{class:"nft-info-title"},[m.title1]):t("span",{class:"nft-info-title"},[m.title2]),s.state.chainLogoName==="bsc"&&t(x,null,[t("span",{class:"network-box",style:"background: #ffc400;"},[t("img",{src:tt},null),s.state.chainLogoName])]),s.state.chainLogoName==="eth"&&t(x,null,[t("span",{class:"network-box",style:"background: #547fef;"},[t("img",{src:at},null),s.state.chainLogoName])])])]),t("div",{class:"quantity-box"},[t("span",{style:{color:y>0&&"#6100EC"}},[y]),b=="block"&&t(x,null,[!s.state.walletAddress&&t("button",null,[i==null?void 0:i.add]),y===0&&s.state.walletAddress&&t("button",{class:"a-button",onClick:()=>{E("add")}},[i==null?void 0:i.add]),y>0&&s.state.walletAddress&&t("div",{class:"quantity-select"},[t("span",{class:"add",onClick:()=>{E("add")}},null)])])]),b=="block"&&s.state.walletAddress&&y!=0&&t("table",{class:"convert-nft-table"},[t("tr",null,[t("th",null,[i==null?void 0:i.tokenId]),t("th",null,[i==null?void 0:i.contractAddress])]),(F=c.value)==null?void 0:F.map(q=>t(x,null,[t("tr",null,[t("td",null,[v("# "),q,v(" ")]),t("td",{style:{color:"#6100EC"}},[Z(m.address,6)])])]))])])])},selectStatus:e,selectWaitingStatus:o,closeSelectStatus:B,type:S,ok:U,dialog:n,waitingStatus:N,updateDialog:T,destroy:R,quantity:f,NowNFTData:C,NowNFTNUM:g,UserApproved:w,allowance:H,UserNFTData:l,newdata:I}},render(){const{store:a,Content:s,selectStatus:e,selectWaitingStatus:o,closeSelectStatus:n,type:N,ok:S,dialog:u,waitingStatus:f,updateDialog:l,locale:c,data:C,destroy:g,quantity:w,NowNFTData:k,NowNFTNUM:B,UserApproved:E,allowance:U,UserNFTData:H,newdata:T}=this;return t(x,null,[t(st,{status:e,selectWaitingStatus:o,quantity:B,data:k,nftinfo:C,onClose:()=>n(),type:N,onOk:D=>S(D),locale:c},null),t(lt,{status:u,login:f,onClose:()=>l(!1),locale:c,data:T},null),t("div",{class:"convert-nft-card-box"},[t("div",{class:"convert-nft-card-container"},[t(s,{quantity:w.from,locale:c,data:C,bntType:"block"},null),t("div",{class:"arrow-box"},[t("img",{src:nt},null)]),t(s,{locale:c,data:C,quantity:w.to},null)]),!a.state.walletAddress&&t("button",{onClick:()=>a.commit("connectWallet"),style:{background:"linear-gradient(90deg, #6100ec 0%, #cc00ce 100%)"}},[c==null?void 0:c.connectWallet]),a.state.walletAddress&&w.from===0&&t("button",{class:"a-wallet"},[c==null?void 0:c.convertNft]),a.state.walletAddress&&w.from>0&&t(x,null,[E?t("button",{style:{background:"linear-gradient(90deg, #6100ec 0%, #cc00ce 100%)"},onClick:()=>g()},[c==null?void 0:c.destroy]):t("button",{style:{background:"linear-gradient(90deg, #6100ec 0%, #cc00ce 100%)"},onClick:()=>U(C)},[v("\u6388\u6743")])])])])}}),ot=_({props:{locale:{type:Object,default:()=>{}}},setup(){const a=d(!0);return setTimeout(()=>{a.value=!1},3e3),{skeletonState:a}},render(){const{skeletonState:a,locale:s}=this,e=s.nftdata;return t(x,null,[t(G,{class:"convert-nft-box",animated:!0,style:{display:a?"":"none"}},{template:()=>t(x,null,[e==null?void 0:e.map(()=>t("div",{class:"convert-nft-card-container"},[t("div",{class:"convert-nft-card-box"},[t("div",{class:"convert-nft-card-container"},[t("div",{class:"convert-nft-card-content-box"},[t("div",{class:"box"},[t("div",{class:"nft-info-box"},[t(h,{variant:"image",class:"nft-image"},null),t("div",{class:"nft-info-container"},[t(h,{variant:"text",class:"nft-info-title"},null),t(h,{variant:"text",class:"network-box"},null)])]),t(h,{variant:"text",class:"quantity-boxs"},null)])]),t("div",{class:"arrow-box"},[t(h,{variant:"image",class:"image"},null)]),t("div",{class:"convert-nft-card-content-box"},[t("div",{class:"box"},[t("div",{class:"nft-info-box"},[t(h,{variant:"image",class:"nft-image"},null),t("div",{class:"nft-info-container"},[t(h,{variant:"text",class:"nft-info-title"},null),t(h,{variant:"text",class:"network-box"},null)])]),t(h,{variant:"text",class:"quantity-boxs"},null)])])]),t(h,{variant:"button",class:"wallet-button"},null)])]))])}),t("div",{class:"convert-nft-box",style:{display:a?"none":""}},[e==null?void 0:e.map(o=>t(ct,{locale:s,data:o},null))])])}}),ut="/assets/conversion.7490047c.svg",yt=_({setup(){const a=W(),s=d(!0),e=d({}),o=(n=a.state.locale)=>{X(n).then(N=>{e.value=N,setTimeout(()=>{s.value=!1},3e3)})};return o(),L(()=>[a.state.locale,a.state.chainLogoName],()=>{o()}),{skeletonState:s,locales:e}},render(){const{skeletonState:a,locales:s}=this;return t("div",{class:"container"},[t("div",{class:"convert-nft"},[t(G,{animated:!0,class:"convert-title-box",style:{display:a?"":"none"}},{template:()=>t(x,null,[t(h,{variant:"text",class:"convert-title-container"},null),t(h,{variant:"text",class:"convert-text"},null)])}),t("div",{class:"convert-title-box",style:{display:a?"none":""}},[t("div",{class:"convert-title-container"},[t("img",{src:ut},null),t("span",null,[s==null?void 0:s.title])]),t("span",{class:"convert-text"},[s==null?void 0:s.description])]),t("hr",null,null),t(ot,{locale:s},null)])])}});export{yt as default};
