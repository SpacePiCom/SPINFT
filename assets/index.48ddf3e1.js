import{t as P,z as H,aL as K,aM as U,a as W,aN as Z,aO as _,aP as J,i as V,aQ as Q,c as F,o as k,V as Y,W as M,r as h,n as m,h as e,Y as G,E as R,w as b,g as N,k as x,Z as ee,X as z,j as oe,B as se,_ as j,aR as te,aS as ae,aT as ne,aU as le,aV as re,aW as ie,u as de,q as X,aX as ce,p as ue,aY as fe,ae as me,af as pe,aZ as ge,a_ as ve,a$ as be,b0 as he,b1 as Ce,l as ye}from"./index.8984459f.js";const q=Symbol("dialogInjectionKey"),Ee=(r,i,p)=>{let C={offsetX:0,offsetY:0};const a=t=>{const v=t.clientX,E=t.clientY,{offsetX:d,offsetY:c}=C,s=r.value.getBoundingClientRect(),n=s.left,w=s.top,D=s.width,T=s.height,$=document.documentElement.clientWidth,I=document.documentElement.clientHeight,A=-n+d,S=-w+c,B=$-n-D+d,u=I-w-T+c,L=l=>{const f=Math.min(Math.max(d+l.clientX-v,A),B),O=Math.min(Math.max(c+l.clientY-E,S),u);C={offsetX:f,offsetY:O},r.value.style.transform=`translate(${U(f)}, ${U(O)})`},o=()=>{document.removeEventListener("mousemove",L),document.removeEventListener("mouseup",o)};document.addEventListener("mousemove",L),document.addEventListener("mouseup",o)},g=()=>{i.value&&r.value&&i.value.addEventListener("mousedown",a)},y=()=>{i.value&&r.value&&i.value.removeEventListener("mousedown",a)};P(()=>{H(()=>{p.value?g():y()})}),K(()=>{y()})},ke=["aria-label"],we=["id"],$e={name:"ElDialogContent"},Le=W({...$e,props:Z,emits:_,setup(r){const i=r,{t:p}=J(),{Close:C}=te,{dialogRef:a,headerRef:g,bodyId:y,ns:t,style:v}=V(q),{focusTrapRef:E}=V(Q),d=ae(E,a),c=F(()=>i.draggable);return Ee(a,g,c),(s,n)=>(k(),Y("div",{ref:e(d),class:m([e(t).b(),e(t).is("fullscreen",s.fullscreen),e(t).is("draggable",e(c)),{[e(t).m("center")]:s.center},s.customClass]),style:oe(e(v)),tabindex:"-1",onClick:n[1]||(n[1]=se(()=>{},["stop"]))},[M("header",{ref_key:"headerRef",ref:g,class:m(e(t).e("header"))},[h(s.$slots,"header",{},()=>[M("span",{role:"heading",class:m(e(t).e("title"))},G(s.title),3)]),s.showClose?(k(),Y("button",{key:0,"aria-label":e(p)("el.dialog.close"),class:m(e(t).e("headerbtn")),type:"button",onClick:n[0]||(n[0]=w=>s.$emit("close"))},[R(e(ee),{class:m(e(t).e("close"))},{default:b(()=>[(k(),N(x(s.closeIcon||e(C))))]),_:1},8,["class"])],10,ke)):z("v-if",!0)],2),M("div",{id:e(y),class:m(e(t).e("body"))},[h(s.$slots,"default")],10,we),s.$slots.footer?(k(),Y("footer",{key:0,class:m(e(t).e("footer"))},[h(s.$slots,"footer")],2)):z("v-if",!0)],6))}});var Me=j(Le,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog-content.vue"]]);const Re=["aria-label","aria-labelledby","aria-describedby"],De={name:"ElDialog"},Te=W({...De,props:ne,emits:le,setup(r,{expose:i}){const p=r,C=re();ie({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},F(()=>!!C.title));const a=de("dialog"),g=X(),y=X(),t=X(),{visible:v,titleId:E,bodyId:d,style:c,rendered:s,zIndex:n,afterEnter:w,afterLeave:D,beforeLeave:T,handleClose:$,onModalClick:I,onOpenAutoFocus:A,onCloseAutoFocus:S,onCloseRequested:B}=ce(p,g);ue(q,{dialogRef:g,headerRef:y,bodyId:d,ns:a,rendered:s,style:c});const u=fe(I),L=F(()=>p.draggable&&!p.fullscreen);return i({visible:v,dialogContentRef:t}),(o,l)=>(k(),N(Ce,{to:"body",disabled:!o.appendToBody},[R(he,{name:"dialog-fade",onAfterEnter:e(w),onAfterLeave:e(D),onBeforeLeave:e(T),persisted:""},{default:b(()=>[me(R(e(ge),{"custom-mask-event":"",mask:o.modal,"overlay-class":o.modalClass,"z-index":e(n)},{default:b(()=>[M("div",{role:"dialog","aria-modal":"true","aria-label":o.title||void 0,"aria-labelledby":o.title?void 0:e(E),"aria-describedby":e(d),class:m(`${e(a).namespace.value}-overlay-dialog`),onClick:l[0]||(l[0]=(...f)=>e(u).onClick&&e(u).onClick(...f)),onMousedown:l[1]||(l[1]=(...f)=>e(u).onMousedown&&e(u).onMousedown(...f)),onMouseup:l[2]||(l[2]=(...f)=>e(u).onMouseup&&e(u).onMouseup(...f))},[R(e(ve),{loop:"",trapped:e(v),"focus-start-el":"container",onFocusAfterTrapped:e(A),onFocusAfterReleased:e(S),onReleaseRequested:e(B)},{default:b(()=>[e(s)?(k(),N(Me,{key:0,ref_key:"dialogContentRef",ref:t,"custom-class":o.customClass,center:o.center,"close-icon":o.closeIcon,draggable:e(L),fullscreen:o.fullscreen,"show-close":o.showClose,title:o.title,onClose:e($)},be({header:b(()=>[o.$slots.title?h(o.$slots,"title",{key:1}):h(o.$slots,"header",{key:0,close:e($),titleId:e(E),titleClass:e(a).e("title")})]),default:b(()=>[h(o.$slots,"default")]),_:2},[o.$slots.footer?{name:"footer",fn:b(()=>[h(o.$slots,"footer")])}:void 0]),1032,["custom-class","center","close-icon","draggable","fullscreen","show-close","title","onClose"])):z("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onReleaseRequested"])],42,Re)]),_:3},8,["mask","overlay-class","z-index"]),[[pe,e(v)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"]))}});var Ie=j(Te,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog.vue"]]);const Se=ye(Ie);export{Se as E};
