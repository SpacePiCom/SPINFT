import{a as j,q as d,y as P,C as e,ay as b,E as U,ax as Q,b9 as X,F as A,ba as T,bb as Z,K as Y,bc as ee,bd as te,be as R}from"./index.9e490859.js";import{g as $,s as H,a as z,k as L,l as M,E as K,B as O}from"./web3Provider.c537c412.js";import{s as ae,n as W}from"./network.4c07acc6.js";import{a as C,E as le}from"./index.d6df0de4.js";var se=j({props:{status:{type:Boolean,default:!1},data:{type:Array,default:[]},quantity:{type:Number,default:0},locale:{type:Object,default:{}},nftinfo:{type:Object,default:{}},type:{type:String,default:!1}},emits:["close"],setup(n,{emit:o}){const c=d(0),r=d([]),a=d([]),v=d([]),g=n.locale.network,k=window.ethereum?$(window.ethereum):H(g),w=d(!1);for(let s=0;s<n.quantity;s++)console.log("HELLO"),n.type=="del"?r.value.push(!0):r.value.push(!1);const p=s=>{r.value[s]?(r.value[s]=!1,c.value=c.value-1):(r.value[s]=!0,c.value=c.value+1)},m=()=>{if(c.value!==n.quantity)for(let s=0;s<n.quantity;s++)r.value[s]=!0,c.value=n.quantity;else for(let s=0;s<n.quantity;s++)r.value[s]=!1,c.value=0},S=async s=>{w.value=!0,L(g,s.address).connect(k).setApprovalForAll(s.contract,!0).then(t=>{t.wait().then(u=>{T({message:n.locale.message.allowance_success,type:"success"}),o("close",!1),w.value=!1})}).catch(t=>{T({message:n.locale.message.allowance_error,type:"error"}),o("close",!1),w.value=!1})},x=async(s,l)=>{console.log("claim",s,l),v.value=[];for(let t=0;t<n.quantity;t++)r.value[t]&&v.value.push(n.data[t]);if(v.value.length!=0){w.value=!0;const t=M(g,s.contract);l=="del"?t.connect(k).withdrawWithId(s.address,v.value).then(u=>{u.wait().then(i=>{T({message:n.locale.message.withdraw_success,type:"success"})}),o("close",!1),w.value=!1}).catch(u=>{T({message:n.locale.message.withdraw_error,type:"error"}),o("close",!1),w.value=!1}):t.connect(k).deposit(s.address,v.value).then(u=>{u.wait().then(i=>{T({message:n.locale.message.deposit_success,type:"success"}),o("close",!1),w.value=!1})}).catch(u=>{T({message:n.locale.message.deposit_error,type:"error"}),o("close",!1),w.value=!1})}};return P(()=>n.status,s=>{if(!s)for(let l=0;l<n.quantity;l++)r.value[l]=!1,c.value=0},{immediate:!0}),{checked:c,statuss:r,pledgeData:a,updateChecked:p,all:m,deposit:x,allowance:S,loginStatus:w}},render(){const{checked:n,quantity:o,data:c,nftinfo:r,statuss:a,pledgeData:v,updateChecked:g,all:k,status:w,locale:p,type:m,allowance:S,deposit:x,loginStatus:s}=this;return e(A,null,[e(z,{modelValue:w,title:r.title,closeOnClickModal:!1,onClose:()=>{this.$emit("close")}},{default:()=>[e("div",{class:"quantity"},[e("span",{class:"quantity-title"},[p.quantity,b("\xA0"),e("span",{style:"color: #23262F;"},[b("("),e("span",{style:"color: rgba(97, 0, 236, 1);"},[n]),b("/"),o,b(")")])]),e("button",{onClick:()=>{k()}},[p.all])]),e("div",{class:"quantity-container"},[c==null?void 0:c.map((l,t)=>e("div",{class:"quantity-card",onClick:()=>{g(t)}},[e("div",{class:"quantity-bg",style:{background:a[t]?"":"none"}},[e(U,{src:r.path+l+r.et},null),e("div",{class:"icon",style:{display:a[t]?"":"none"}},[e(Q,null,{default:()=>[e(X,null,null)]})])]),e("span",{class:"card-title"},["#"+l])]))]),r!=null&&r.Approved?e(A,null,[c.length>0?e("button",{class:"receive",onClick:()=>s?"":x(r,m)},[p.ok,s?e("div",{class:"loaders"},null):""]):e("button",{class:"receive receive-disabled",disabled:!0,onClick:()=>s?"":x(r,m)},[p.ok,s?e("div",{class:"loaders"},null):""])]):e("button",{class:"receive",onClick:()=>s?"":S(r)},[p.approved,s?e("div",{class:"loaders"},null):""])]})])}}),ne=j({props:{status:{type:Boolean,default:!1},login:{type:Boolean,default:!1},data:{type:Object,default:{}},locale:{type:Object,default:{}}},emits:["close"],render(){const{status:n,login:o,locale:c}=this;return e("div",{class:"my-dialog"},[e(z,{modelValue:n,closeOnClickModal:!1,onClose:()=>{this.$emit("close")}},{default:()=>[e("div",{class:"login"},[o?e("div",{class:"loginAnimation"},null):e("span",null,[b("Yay! \u{1F389}")])]),e("div",{class:"text"},[o?e("span",{class:"waiting"},[c.waiting]):e("span",{class:"waiting"},[c.successPurchased]),e("span",{class:"quantity"},[c.quantity,b(" (0)")])]),e("div",{class:"tables"},[e("table",null,[e("tr",{class:"table-header"},[e("th",{class:"table-header-item"},[e("span",null,[c.name])]),e("th",{class:"table-header-item"},[e("span",null,[c.transactionId])])]),o?e("tr",{class:"table-body"},[e("td",{class:"table-body-item",style:"color: #9757D7;width: 50%;"},[e("span",null,[b("-")])]),e("td",{class:"table-body-item",style:"width: 50%;"},[e("span",null,[b("-")])])]):e(A,null,[e("tr",{class:"table-body"},[e("td",{class:"table-body-item",style:"color: #9757D7"},[e("a",{style:"color: #6200EB;",href:"https://bscscan.com/tx/1"},[e("span",null,[b("Cyberpunk Pi #1")])])]),e("td",{class:"table-body-item"},[e("span",null,[Z("0x3A2d206A01DFE9f27D5CC915AbC8bA7504B1ec02",7)])])])])])]),o?e(K,{style:"background: #777E90;"},{default:()=>[c.receive]}):e(K,{onClick:()=>this.$emit("close")},{default:()=>[c.receive]})]})])}}),oe="/assets/lock.995f59df.svg",ce=j({props:{endTime:{type:Number,default:0},locale:{type:Object,default:{}},data:{type:Object,default:{}}},emits:["status"],setup(n,{emit:o}){const{state:c,commit:r}=Y(),a=d(0),v=d(0),g=d(0),k=d(0),w=d(0),p=d(),m=d(!1),S=d(),x=d(0),s=d(!1),l=d(!1),t=d(!1),u=d(""),i=n.locale.network,N=window.ethereum?$(window.ethereum):H(i),y=()=>{const f=new Date().getTime(),h=new Date(n.endTime*1e3).getTime()-f;w.value=h,h>0?(a.value=Math.floor(h/1e3/60/60/24),v.value=Math.floor(h/1e3/60/60%24),g.value=Math.floor(h/1e3/60%60),k.value=Math.floor(h/1e3%60)):(a.value=0,v.value=0,g.value=0,k.value=0,clearInterval(p.value))};p.value=setInterval(y,1e3),P(()=>n.endTime,f=>{p.value=setInterval(y,1e3)});const D=f=>{m.value=f,o("status",f)};return{state:c,commit:r,day:a,hour:v,minute:g,second:k,timer:w,pledgeStatus:m,updatePledgeStatus:D,dialogStatus:s,loginStatus:l,updateDialogStatus:f=>{f?(s.value=!0,l.value=!0,setTimeout(()=>{l.value=!1},2e3)):(s.value=!1,l.value=!1)},updatepledgeData:f=>{f=="del"?(u.value="del",S.value=n.data.OwnerStakeData[0],x.value=n.data.OwnerStakeData[0].length):(u.value="add",S.value=n.data.OwnerNftData,console.log("pledgeData",n.data.OwnerNftData.length),x.value=n.data.OwnerNftData.length),D(!0)},pledgeData:S,pledgequantity:x,type:u,claim:async f=>{t.value=!0,M(i,f.contract).connect(N).claim(f.address).then(h=>{h.wait().then(B=>{T({message:n.locale.message.claim_success,type:"success"}),t.value=!1})}).catch(h=>{t.value=!1,T({message:n.locale.message.claim_error,type:"error"})})},logoStatus:t}},render(){var D,_,F,q,f,I,h,B;const{state:n,commit:o,day:c,hour:r,minute:a,second:v,timer:g,pledgeStatus:k,updatePledgeStatus:w,dialogStatus:p,loginStatus:m,updateDialogStatus:S,updatepledgeData:x,pledgeData:s,locale:l,data:t,pledgequantity:u,type:i,claim:N,logoStatus:y}=this;return e(A,null,[e(se,{data:s,quantity:u,status:k,onClose:()=>w(!1),locale:l,nftinfo:t,type:i},null),e(ne,{status:p,login:m,onClose:()=>{S(!1)},locale:l},null),e("div",null,[e("div",{class:"airdrop-card"},[e("div",{class:"left"},[e("div",{style:"position: relative;"},[e(U,{src:t.logo_url},null),((_=(D=t.OwnerStakeData)==null?void 0:D[0])==null?void 0:_.length)!=0?e(U,{src:oe,class:"lock"},null):""]),e("span",{class:"card-titles"},[t.title]),e("span",{class:"card-texts"},[l.auctionEndingIn]),e("div",{class:"card-countdown-main countdown"},[e("div",{class:"card-countdown countdown-container days"},[e("span",{class:"card-title countdown-value"},[c]),e("span",{class:"card-text countdown-heading"},[(F=l==null?void 0:l.date)==null?void 0:F.day])]),e("div",{class:"card-countdown countdown-container hours"},[e("span",{class:"card-title countdown-value"},[r]),e("span",{class:"card-text countdown-heading"},[(q=l==null?void 0:l.date)==null?void 0:q.hour])]),e("div",{class:"card-countdown countdown-container minutes"},[e("span",{class:"card-title countdown-value"},[a]),e("span",{class:"card-text countdown-heading"},[(f=l==null?void 0:l.date)==null?void 0:f.minute])]),e("div",{class:"card-countdown countdown-container seconds"},[e("span",{class:"card-title countdown-value"},[v]),e("span",{class:"card-text countdown-heading"},[(I=l==null?void 0:l.date)==null?void 0:I.second])])])]),e("div",{class:"right"},[e("span",{class:"card-title"},[l.pledge]),e("div",{class:"car-container"},[e("div",null,[e("span",{class:"container-title"},[l.quantity]),e("span",{class:"container-text"},[(h=t.OwnerStakeData)==null?void 0:h[0].length])]),e("div",null,[e("span",{class:"container-title"},[l.Weights]),e("span",{class:"container-text"},[b("1 : "),t.NFT_collections])]),this.data.OwnerStakeData.length>0?e("div",null,[e("span",{class:"container-title"},[l.output]),e("span",{class:"container-text"},[e(U,{src:t.outputImage},null),b("Astronaut V2")])]):""]),e("div",{class:"car-bnt"},[n.walletAddress?e("div",{class:"pledge"},[t.OwnerStakeData[1]*1e3>new Date().getTime()||((B=t.OwnerStakeData)==null?void 0:B[0].length)<=0?e(A,null,[e("button",{class:"del ",disabled:!0},[e("span",null,null)]),t.OwnerStakeData[2]===0||t.OwnerStakeData[1]*1e3>new Date().getTime()?e("button",{class:"add bnt",onClick:()=>x("add")},[e("span",{class:"s"},null),e("span",{class:"ss"},null)]):e("button",{class:"add",disabled:!0},[e("span",{class:"s"},null),e("span",{class:"ss"},null)])]):e(A,null,[e("button",{class:"del bnt",onClick:()=>x("del")},[e("span",null,null)]),e("button",{class:"add",disabled:!0},[e("span",{class:"s"},null),e("span",{class:"ss"},null)])])]):e("button",{class:"bnt",onClick:()=>{o("connectWallet")}},[l.connectWallet]),n.walletAddress==""||t.OwnerStakeData[1]*1e3>new Date().getTime()||Number(t.OwnerStakeData[2])<=0?e("button",{disabled:!0},[l.receive,b(" ("),t.OwnerStakeData[2],b(")")]):e("button",{style:{border:" 2px solid #E62AF0",color:"#E62AF0",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px"},onClick:()=>{y||N(t)}},[l.receive,b(" ("),t.OwnerStakeData[2],b(")"),y?e("svg",{viewBox:"25 25 50 50",class:"loaders"},[e("circle",{r:"20",cy:"50",cx:"50"},null)]):""])])])]),e("div",{class:"content"},[e(U,{src:ae,class:"connect-wallet-introduction-icon"},null),e("span",null,[t.text])])])])}}),re=j({render(){return e(le,{animated:!0},{template:e(A,null,[e("div",{class:"airdrop-card"},[e("div",{class:"left"},[e("div",{style:"position: relative;"},[e(C,{class:"el-image"},null)]),e(C,{variant:"text",style:{width:"100%",height:"26px"}},null),e(C,{variant:"text",style:{width:"80%",height:"16px"}},null),e("div",{class:"card-countdown-main countdown"},[e("div",{class:"card-countdown countdown-container days"},[e(C,{variant:"text",style:{width:"60px",height:"16px"}},null)]),e("div",{class:"card-countdown countdown-container hours"},[e(C,{variant:"text",style:{width:"60px",height:"16px"}},null)]),e("div",{class:"card-countdown countdown-container minutes"},[e(C,{variant:"text",style:{width:"60px",height:"16px"}},null)])])]),e("div",{class:"right"},[e(C,{variant:"text",style:{width:"100%",height:"36px"}},null),e("div",{class:"car-container"},[e("div",null,[e(C,{variant:"text",style:{width:"100%",height:"16px"}},null)]),e("div",null,[e(C,{variant:"text",style:{width:"100%",height:"16px"}},null)]),e("div",null,[e(C,{variant:"text",style:{width:"100%",height:"16px"}},null)])]),e("div",{class:"car-bnt"},[e(C,{variant:"button",style:{width:"100%",height:"40px"}},null),e(C,{variant:"button",style:{width:"100%",height:"40px"}},null)])])]),e("div",{class:"content"},[e(C,{style:{width:"100%",height:"26px"}},null)])])})}}),we=j({setup(){const{toClipboard:n}=ee(),{state:o,commit:c}=Y(),r=t=>{n(t),T.success("copy success")},a=d({}),v=d(!1);d([]);const g=d([]),k=d(!1),w=(t=o.locale)=>{te(t).then(u=>{if(v.value=!0,a.value=u.data,!o.walletAddress)for(let i=0;i<a.value.nftdata.length;i++)M(m,a.value.nftdata[i].contract,S),L(m,a.value.nftdata[i].address,S),a.value.nftdata[i].Balance=0,a.value.nftdata[i].Approved=!1,a.value.nftdata[i].OwnerStakeData=[{},0,0],a.value.nftdata[i].OwnerNftData=[],a.value.nftdata[i].NFT_collections=a.value.nftdata[i].NFT_count;setTimeout(()=>{v.value=!1},1e3),s()})};w();const p=t=>{k.value=t},m=a.value.network,S=window.ethereum?$(window.ethereum):H(m),x=async()=>{for(let t=0;t<a.value.nftdata.length;t++){const u=M(m,a.value.nftdata[t].contract,S),i=L(m,a.value.nftdata[t].address,S);o.walletAddress?Promise.all([i.balanceOf(o.walletAddress),i.isApprovedForAll(o.walletAddress,a.value.nftdata[t].contract),u.getDeposits(o.walletAddress,i.address),u.collections(i.address),u.reversed(),u.total()]).then(([N,y,D,_,F,q])=>{const f=new O(N.toString()).toNumber(),I=new O(_.toString()).toNumber();let h=[],B=[];for(let E=0;E<D[0].length;E++){const V=D[0][E];B.push(new O(V.toString()).toFixed())}const G=new O(D[1].toString()).toNumber(),J=new O(D[2].toString()).toNumber();h=[B,G,J],g.value[t]=h,a.value.nftdata[t].Balance=f,a.value.nftdata[t].Approved=y,a.value.nftdata[t].OwnerStakeData=h,a.value.nftdata[t].NFT_collections=I,a.value.NFT_reversed=new O(F.toString()).toNumber(),a.value.NFT_total=new O(q.toString()).toNumber(),a.value.nftdata[t].OwnerNftData=[];for(let E=0;E<f;E++)Promise.all([i.tokenOfOwnerByIndex(o.walletAddress,E)]).then(([V])=>{a.value.nftdata[t].OwnerNftData[E]=new O(V.toString()).toFixed()})}):Promise.all([u.collections(i.address),u.reversed(),u.total()]).then(([N,y,D])=>{const _=new O(0).toNumber(),F=new O(N.toString()).toNumber();let q=[[],0,0];g.value[t]=q,a.value.nftdata[t].Balance=_,a.value.nftdata[t].Approved=!1,a.value.nftdata[t].OwnerStakeData=q,a.value.nftdata[t].NFT_collections=F,a.value.nftdata[t].OwnerNftData=[],a.value.NFT_reversed=new O(y.toString()).toNumber(),a.value.NFT_total=new O(D.toString()).toNumber()})}},s=async()=>{var t;if(window.ethereum){const u=new R(R.givenProvider);if(await u.eth.getChainId()!==a.value.network)for(let N=0;N<W.length;N++){const y=W[N];if(y.chainId===a.value.network)try{await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:u.utils.numberToHex(a.value.network)}]}).then(D=>{window.location.reload()})}catch{try{await window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:u.utils.toHex(a.value.network),chainName:y.chainName,nativeCurrency:y.nativeCurrency,rpcUrls:y.rpcUrls,blockExplorerUrls:y.blockExplorerUrls}]}).then(_=>{window.location.reload()})}catch{}}}}else(t=W)==null||t.find(u=>{u.chainId,a.value.network})};P(()=>o.locale,t=>{t&&(console.log("locale",t),w())}),P(()=>o.walletAddress,t=>{a.value.nftdata=[],w()});let l=setInterval(()=>x(),1e3);return clearInterval(l),P(()=>k.value,t=>{t?clearInterval(l):l=setInterval(()=>x(),1e3)},{immediate:!0,deep:!0}),{copy:r,localeData:a,setOpenStatusChange:p,logoStatus:v}},render(){var a;const{copy:n,localeData:o,setOpenStatusChange:c,logoStatus:r}=this;return e("div",{class:"airdrop"},[e("div",{class:"container-1500"},[e("div",{class:"airdrop-bottom"},[r?e(A,null,[e(re,null,null)]):e(A,null,[(a=o==null?void 0:o.nftdata)==null?void 0:a.map(v=>e(A,null,[e(ce,{endTime:v==null?void 0:v.OwnerStakeData[1],data:v,locale:o,onStatus:g=>c(g)},null)]))])])])])}});export{we as default};
